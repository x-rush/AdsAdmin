<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd" >
<mapper namespace="com.erpdemo.dao.ReturnListEntityMapper" >
  <resultMap id="BaseResultMap" type="com.erpdemo.entity.ReturnListEntity" >
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
    -->
    <id column="id" property="id" jdbcType="INTEGER" />
    <result column="amountpaid" property="amountpaid" jdbcType="REAL" />
    <result column="amountpayable" property="amountpayable" jdbcType="REAL" />
    <result column="remarks" property="remarks" jdbcType="VARCHAR" />
    <result column="returndate" property="returndate" jdbcType="TIMESTAMP" />
    <result column="returnnumber" property="returnnumber" jdbcType="VARCHAR" />
    <result column="state" property="state" jdbcType="INTEGER" />
    <result column="supplierid" property="supplierid" jdbcType="INTEGER" />
    <result column="userid" property="userid" jdbcType="INTEGER" />
    <result column="delflag" property="delflag" jdbcType="INTEGER" />
    <result column="addtime" property="addtime" jdbcType="TIMESTAMP" />
  </resultMap>
  <sql id="Base_Column_List" >
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
    -->
    id, amountpaid, amountpayable, remarks, returndate, returnnumber, state, supplierid, 
    userid, delflag, addtime
  </sql>
  
  <select id="queryList" resultMap="BaseResultMap">
		select
			r.id as id, 
			r.returnnumber as returnnumber,
			r.returndate as returndate, 
			r.returnnumber as returnnumber, 
			r.supplierid as supplierid,
			r.amountpaid as amountpaid,
			r.remarks as remarks, 
			r.delflag as delflag, 
			r.addtime as addtime, 
			r.userid as userid,
			u.user_id as u_userid,
			u.username as u_username
			
		from 
			t_return_list r left join sys_user u
			on r.userid = u.user_id
		<where>
				
			<if test="returnnumber != null and returnnumber.trim() != ''">
				and r.returnnumber like concat('%',#{returnnumber},'%')
			</if>
			 <if test="timestart!=null and timestart!='' " >
    			<![CDATA[and r.addtime >= #{timestart}]]>
    		</if>
    		<if test="timeend!=null and timeend!='' " >
    			<![CDATA[and r.addtime <= concat(#{timeend},' 23:59:59')]]>
    		</if>
    			and r.delflag =0
    		
		</where> 		
	
			
		<choose>
			<when test="sidx != null and sidx.trim() != ''">
				order by ${sidx} ${order}
			</when>
			<otherwise>
				order by addtime desc
			</otherwise>
		</choose>
		<if test="offset != null and limit != null">
			limit #{offset}, #{limit}
		</if>
	</select>

	<select id="queryTotal" resultType="int">
		select
			count(*)
		from 
			t_return_list r left join sys_user u
			on r.userid = u.user_id
		<where>
			<if test="returnnumber != null and returnnumber.trim() != ''">
				and r.returnnumber like concat('%',#{returnnumber},'%')
			</if>
			 <if test="timestart!=null and timestart!='' " >
    			<![CDATA[and r.addtime >= #{timestart}]]>
    		</if>
    		<if test="timeend!=null and timeend!='' " >
    			<![CDATA[and r.addtime <= concat(#{timeend},' 23:59:59')]]>
    		</if>
			
			and r.delflag =0
		</where>
	</select>

	<select id="queryObject" resultMap="BaseResultMap">
		select
			<include refid="Base_Column_List" />
		from t_return_list
		where id = #{id,jdbcType=INTEGER}
	</select>
  
  <select id="querySearch" resultMap="BaseResultMap">
		select
			<include refid="Base_Column_List" />
		 from t_return_list_goods
		where id = #{id,jdbcType=INTEGER}
	</select>
  
  
  
  
  
  <select id="selectByPrimaryKey" resultMap="BaseResultMap" parameterType="java.lang.Integer" >
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
    -->
    select 
    <include refid="Base_Column_List" />
    from t_return_list
    where id = #{id,jdbcType=INTEGER}
  </select>
  <delete id="deleteByPrimaryKey" parameterType="java.lang.Integer" >
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
    -->
    delete from t_return_list
    where id = #{id,jdbcType=INTEGER}
  </delete>
  <insert id="insert" parameterType="com.erpdemo.entity.ReturnListEntity" >
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
    -->
    insert into t_return_list (id, amountpaid, amountpayable, 
      remarks, returndate, returnnumber, 
      state, supplierid, userid, 
      delflag, addtime)
    values (#{id,jdbcType=INTEGER}, #{amountpaid,jdbcType=REAL}, #{amountpayable,jdbcType=REAL}, 
      #{remarks,jdbcType=VARCHAR}, #{returndate,jdbcType=TIMESTAMP}, #{returnnumber,jdbcType=VARCHAR}, 
      #{state,jdbcType=INTEGER}, #{supplierid,jdbcType=INTEGER}, #{userid,jdbcType=INTEGER}, 
      #{delflag,jdbcType=INTEGER}, #{addtime,jdbcType=TIMESTAMP})
  </insert>
  <insert id="save" parameterType="com.erpdemo.entity.ReturnListEntity" >
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
    -->
    insert into t_return_list
    <trim prefix="(" suffix=")" suffixOverrides="," >
      <if test="id != null" >
        id,
      </if>
      <if test="amountpaid != null" >
        amountpaid,
      </if>
      <if test="amountpayable != null" >
        amountpayable,
      </if>
      <if test="remarks != null" >
        remarks,
      </if>
      <if test="returndate != null" >
        returndate,
      </if>
      <if test="returnnumber != null" >
        returnnumber,
      </if>
      <if test="state != null" >
        state,
      </if>
      <if test="supplierid != null" >
        supplierid,
      </if>
	 
        delflag,
      
        addtime,
      
      <if test="userid != null" >
        userid,
      </if>
      
    </trim>
    <trim prefix="values (" suffix=")" suffixOverrides="," >
      <if test="id != null" >
        #{id,jdbcType=INTEGER},
      </if>
      <if test="amountpaid != null" >
        #{amountpaid,jdbcType=REAL},
      </if>
      <if test="amountpayable != null" >
        #{amountpayable,jdbcType=REAL},
      </if>
      <if test="remarks != null" >
        #{remarks,jdbcType=VARCHAR},
      </if>
      <if test="returndate != null" >
        #{returndate,jdbcType=TIMESTAMP},
      </if>
      <if test="returnnumber != null" >
        #{returnnumber,jdbcType=VARCHAR},
      </if>
      <if test="state != null" >
        #{state,jdbcType=INTEGER},
      </if>
      <if test="supplierid != null" >
        #{supplierid,jdbcType=INTEGER},
      </if>
		0,
        now(),
      <if test="userid != null" >
        #{userid,jdbcType=INTEGER},
      </if>
      

    </trim>
  </insert>
  <update id="update" parameterType="com.erpdemo.entity.ReturnListEntity" >
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
    -->
    update t_return_list
    <set >
      <if test="amountpaid != null" >
        amountpaid = #{amountpaid,jdbcType=REAL},
      </if>
      <if test="amountpayable != null" >
        amountpayable = #{amountpayable,jdbcType=REAL},
      </if>
      <if test="remarks != null" >
        remarks = #{remarks,jdbcType=VARCHAR},
      </if>
      <if test="returndate != null" >
        returndate = #{returndate,jdbcType=TIMESTAMP},
      </if>
      <if test="returnnumber != null" >
        returnnumber = #{returnnumber,jdbcType=VARCHAR},
      </if>
      <if test="state != null" >
        state = #{state,jdbcType=INTEGER},
      </if>
      <if test="supplierid != null" >
        supplierid = #{supplierid,jdbcType=INTEGER},
      </if>
      <if test="userid != null" >
        userid = #{userid,jdbcType=INTEGER},
      </if>
      <if test="delflag != null" >
        delflag = #{delflag,jdbcType=INTEGER},
      </if>
      <if test="addtime != null" >
        addtime = #{addtime,jdbcType=TIMESTAMP},
      </if>
    </set>
    where id = #{id,jdbcType=INTEGER}
  </update>
  <update id="updateByPrimaryKey" parameterType="com.erpdemo.entity.ReturnListEntity" >
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
    -->
    update t_return_list
    set amountpaid = #{amountpaid,jdbcType=REAL},
      amountpayable = #{amountpayable,jdbcType=REAL},
      remarks = #{remarks,jdbcType=VARCHAR},
      returndate = #{returndate,jdbcType=TIMESTAMP},
      returnnumber = #{returnnumber,jdbcType=VARCHAR},
      state = #{state,jdbcType=INTEGER},
      supplierid = #{supplierid,jdbcType=INTEGER},
      userid = #{userid,jdbcType=INTEGER},
      delflag = #{delflag,jdbcType=INTEGER},
      addtime = #{addtime,jdbcType=TIMESTAMP}
    where id = #{id,jdbcType=INTEGER}
  </update>
</mapper>